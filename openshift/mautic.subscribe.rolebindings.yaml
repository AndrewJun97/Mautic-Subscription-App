kind: Template
apiVersion: v1
objects:

  - apiVersion: rbac.authorization.k8s.io/v1
    kind: RoleBinding
    metadata:
      name: system:image-puller-dev
      namespace: ${NAMESPACE}-tools
    roleRef:
      apiGroup: rbac.authorization.k8s.io
      kind: ClusterRole
      name: system:image-puller
    subjects:
    - kind: ServiceAccount
      name: default
      namespace: ${NAMESPACE}-dev

  - apiVersion: rbac.authorization.k8s.io/v1
    kind: RoleBinding
    metadata:
      name: system:image-puller-test
      namespace: ${NAMESPACE}-tools
    roleRef:
      apiGroup: rbac.authorization.k8s.io
      kind: ClusterRole
      name: system:image-puller
    subjects:
    - kind: ServiceAccount
      name: default
      namespace: ${NAMESPACE}-test

  - apiVersion: rbac.authorization.k8s.io/v1
    kind: RoleBinding
    metadata:
      name: system:image-puller-prod
      namespace: ${NAMESPACE}-tools
    roleRef:
      apiGroup: rbac.authorization.k8s.io
      kind: ClusterRole
      name: system:image-puller
    subjects:
    - kind: ServiceAccount
      name: default
      namespace: ${NAMESPACE}-prod

parameters:
- description: Namespace name
  displayName: NAMESPACE
  name: NAMESPACE
  required: true
